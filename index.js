"production"!==process.env.NODE_ENV&&require("dotenv").config({path:".env.development"}),console.log({NODE_ENV:process.env.NODE_ENV,DATABASE_URL:process.env.DATABASE_URL});const express=require("express"),cors=require("cors"),usuariosRoutes=require("./routes/usuarios"),cotizacionesRoutes=require("./routes/cotizaciones"),adminRoutes=require("./routes/admin"),db=require("./db"),bcrypt=require("bcrypt"),seedAdmin=require("./seeds/createAdmin"),app=express();app.use(express.json()),app.use(cors({origin:"*",methods:["GET","POST","PUT","DELETE","OPTIONS"],allowedHeaders:["Content-Type","Authorization"]})),app.use("/api/usuarios",usuariosRoutes),app.use("/api/cotizaciones",cotizacionesRoutes),app.use("/api/admin",adminRoutes),app.get("/",((e,s)=>s.send("Solar backend operativo")));const PORT=process.env.PORT||3001;app.listen(PORT,(()=>console.log(`☀️ Servidor solar encendido en puerto ${PORT}`))),seedAdmin().catch((e=>console.error("❌ Error al crear admin seed:",e))),module.exports=app;